"use strict";angular.module("studentApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngSanitize","ngTouch","ui.router","ui.bootstrap","checklist-model","ui.bootstrap-slider"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$logProvider",function(a,b,c,d,e){var f=angular.injector(["ng"]).get("$log");f.info("In bootstrap config ","state provider: ",a,"url router: ",b,"location provider: ",c,"http provider: ",d),c.html5Mode(!0)}]).run(["$rootScope","$location","$log",function(a,b,c){c.info("in run method for bootstrap",b,a,b.$$path),a.$on("$stateChangeStart",function(a,d){c.info("run::executed state change check.",a,d),b.path(b.$$path)})}]),angular.module("studentApp").config(["$stateProvider","$logProvider",function(a,b){var c=angular.injector(["ng"]).get("$log");c.info("in main router (part of config bootstrap)",a),a.state("main",{url:"/",views:{"":{templateUrl:"views/main.html"},"content@main":{templateUrl:"views/content.html",controller:"MainCtrl"},"secondary-nav@main":{templateUrl:"views/secondaryNav.html"},"main-nav@main":{templateUrl:"views/mainNav.html"}}})}]),angular.module("studentApp").factory("StudentService",["$location","$rootScope","$http","$q","$log",function(a,b,c,d,e){return e.info("In StudentService factory"),{getStudents:function(a){e.info("In StudentService.getStudents().  Try to retrieve.");var b=a||angular.noop,f=d.defer();return c.get("api/students").success(function(a){return e.info('StudentService.getStudents()::Got back a "successful" response with: ',a),f.resolve(a),b()}).error(function(a){return e.error('StudentService.getStudents()::Got back a "failed" response with: ',a),f.reject(a),b(a)}.bind(this)),f.promise},getClasses:function(a,b){e.info("In StudentService.getClasses().  Try to retrieve for: ",a);var f=b||angular.noop,g=d.defer();return c.get("api/students/"+a).success(function(a){return e.info('StudentService.getClasses()::Got back a "successful" response with: ',a),g.resolve(a),f()}).error(function(a){return e.error('StudentService.getClasses()::Got back a "failed" response with: ',a),g.reject(a),f(a)}.bind(this)),g.promise},updateGrade:function(a,b,f){e.info("In StudentService.updateGrade().  Try to upgrade for: ",a,b);var g=f||angular.noop,h=d.defer();return c.post("/api/student/"+a,b).success(function(a){return e.info('StudentService.updateGrade()::Got back a "successful" response with: ',a),h.resolve(a),g()}).error(function(a){return e.error('StudentService.updateGrade()::Got back a "failed" response with: ',a),h.reject(a),g(a)}.bind(this)),h.promise}}}]),angular.module("studentApp").directive("students",["StudentService","$location","$modal","$log",function(a,b,c,d){return{templateUrl:"views/students.html",restrict:"E",link:function(a,b,d){console.log("students:",a,b,d),a.showClasses=function(b){c.open({templateUrl:"views/classes_modal.html",backdrop:"static",controller:"ModalInstanceCtrl",resolve:{student:function(){return b},newInstance:function(){return a.newInstance}}})}}}}]),angular.module("studentApp").controller("MainCtrl",["$scope","$log","StudentService",function(a,b,c){b.info("In Main Ctrl"),a.ui={waitingForLoad:!0,studentFetchError:!1},c.getStudents().then(function(c){a.ui.waitingForLoad=!1,a.students=c,b.info("MainCtrl StudentService.getStudents::got back students: ",c)})["catch"](function(c){a.ui.waitingForLoad=!1,a.ui.studentFetchError=!0,b.error("MainCtrl StudentService.getStudents::Got an error: ",c)})}]).controller("ModalInstanceCtrl",["StudentService","$scope","$modalInstance","student","$log",function(a,b,c,d,e){e.info("inside modal instance ctrl",d),e.info("showClasses called: ",d),a.getClasses(d.Id).then(function(a){console.log("students:",a),b.classes=a,e.info("students StudentService.showClasses::got back classes: ",a)})["catch"](function(a){e.error("students StudentService.showClasses::Got an error: ",a)}),b.updateGrade=function(c,d){e.info("update grade ",c,d),a.updateGrade(c.Id,d).then(function(a){console.log("students:",a),b.classes=a,e.info("students StudentService.showClasses::got back classes: ",a)})["catch"](function(a){e.error("students StudentService.showClasses::Got an error: ",a)})},b.ok=function(){c.close(b.status)},b.cancel=function(){c.dismiss("cancel")}}]),angular.module("studentApp").run(["$templateCache",function(a){a.put("views/classes_modal.html",'<div class="modal-header"> </div> <h3 class="modal-title">Classes for {{ student.Name }}!</h3> <div class="modal-body"> <div class="rs-control-group rs-embedded-list-table-wrapper rs-embedded-medium"> <table class="rs-list-table rs-embedded-list-table"> <thead> <tr> <th><span class="rs-table-sort-text">Class ID</span></th> <th><span class="rs-table-sort-text">Name</span></th> <th><span class="rs-table-sort-text">Grade</span></th> <th><span class="rs-table-sort-text">Actions</span></th> </tr> </thead> <tbody> <tr data-ng-repeat="cl in classes"> <td class="rs-table-text">{{ cl.Id }}</td> <td class="rs-table-text">{{ cl.Name }}</td> <td class="rs-table-text">{{ cl.Grade }}</td> <td class="rs-table-text"> <button class="rs-btn rs-btn-primary" data-ng-click="updateGrade(student, cl)">Update Grade</button> </td> </tr> </tbody> </table> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="dismiss()">Dismiss</button> </div>'),a.put("views/content.html",'<div class="rs-container"> <div class="rs-main rs-panel"> <div class="rs-content rs-panel"> <div class="rs-inner"> <h2 class="rs-page-title">Students</h2> <students></students> <div class="rs-table-overlay rs-table-overlay-loading" data-ng-if="ui.waitingForLoad"> <div class="rs-table-overlay-content"> <div class="rs-table-overlay-message"> Loading Students&hellip; </div> </div> </div> <div class="rs-table-overlay" data-ng-if="ui.studentFetchError"> <div class="rs-table-overlay-content"> <div class="rs-table-overlay-title"><h3>Sorry, something went wrong when trying to list your students.</h3></div> <div class="rs-table-overlay-message"> <p>You can try to list them again, but you may need to contact support if the problem persists.</p> <p class="table-overlay-btn-group"> <button class="rs-btn" data-ng-click="clusters.forceFetchStudents()">Try Again</button> </p> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/main.html",'<div class="rs-wrapper"> <div data-ui-view="main-nav"></div> <div data-ui-view="secondary-nav"></div> <div data-ui-view="content"></div> </div> <div data-ui-view="footer"></div>'),a.put("views/mainMenu.html",'<nav class="navbar navbar-inverse navbar-fixed-top"> <div class="container-fluid"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse" id="main-navbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Cloud Control Panel <span class="caret"></span></a> <ul class="dropdown-menu dropdown-inverse" role="menu"> <li><a href="#">Action</a></li> <li><a href="#">Another action</a></li> <li><a href="#">Something else here</a></li> <li class="divider"></li> <li><a href="#">Separated link</a></li> <li class="divider"></li> <li><a href="#">One more separated link</a></li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li><a href="#">Feedback</a></li> <li><a href="#"><i class="fa fa-life-ring"></i>&nbsp;Support</a></li> <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Account: {{ username }} <span class="caret"></span></a> <ul class="dropdown-menu dropdown-inverse" role="menu"> <li><a href="#">Account #{{ tenant }}</a></li> <li class="divider"></li> <li><a href="#">Help</a></li> <li class="divider"></li> <li><a href="#" ng-click="logout()">Logout</a></li> </ul> </li> </ul> </div><!-- /.navbar-collapse --> </div><!-- /.container-fluid --> </nav>'),a.put("views/mainNav.html",'<div class="rs-nav-utility"> <nav class="navbar navbar-inverse navbar-fixed-top"> <div class="container-fluid"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse" id="main-navbar"> <ul class="nav navbar-nav"> <li> <a href="/"><span>Austin .NET User Group Demo</span></a> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li><a href="#">Feedback</a></li> <li><a href="#"><i class="fa fa-life-ring"></i>&nbsp;Help</a></li> </ul> </div><!-- /.navbar-collapse --> </div><!-- /.container-fluid --> </nav> </div>'),a.put("views/secondaryNav.html",'<div class="rs-nav-primary"> <div class="rs-container"> <div class="rs-nav-brand"> <img height="50px" src="https://pbs.twimg.com/profile_images/2205464963/atxdnug_400x400.png" alt="ADNUG Logo"> </div> <ul class="rs-nav"> <li class="rs-nav-item"> <a data-ui-sref="main" class="rs-nav-link">Students</a> </li> </ul> </div> </div>'),a.put("views/students.html",'<div class="rs-control-group" data-ng-show="!ui.studentFetchError && !ui.waitingForLoad"> <table class="rs-list-table"> <thead> <tr> <th> <span class="rs-table-sort-text">Student ID</span> </th> <th> <span class="rs-table-sort-text">Name</span> </th> <th> <span class="rs-table-sort-text">GPA</span> </th> <th> <span class="rs-table-sort-text">Classes</span> </th> </tr> </thead> <tbody> <tr ng-repeat="student in students track by $index"> <td class="rs-table-text">{{ student.Id }}</td> <td class="rs-table-text">{{ student.Name }}</td> <td class="rs-table-text">{{ student.gpa }}</td> <td class="rs-table-text"> <button class="rs-btn rs-btn-primary" data-ng-click="showClasses(student)">Show</button> </td> </tr> </tbody> </table> </div>')}]);